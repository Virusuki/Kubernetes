# 모니터링 서비스 플랫폼
- 쿠버네티스의 metric 수집 모니터링 아키텍처에서 코어메트릭 파이프라인 경량화
- 힙스터를 deprecated하고 모니터링 표준으로 메트릭서버(metrics-server) 도입

- # kubectl top node

```
```

### 리소트 메트릭 파이프라인
  - kubectl top 등의 유틸리티 관련된 메트릭들로 제한된 집합을 제공
  - 단기 메모리 저장소인 metrics-server에 의해 수집
  - metrics-server는 모든 노드를 발견하고 kubelet에 cpu와 메모리를 질의
  - kubelet은 kubelet에 통합된 cAdvisor를 통해 레거시 도커와 통합 후 metric-server 리소스 메트릭으로 노출
  - /metrics/resource/v1beta1 API를 사용

### 완전한 메트릭 파이프라인
  - 다양한 메트릭에 접근
  - 클러스터의 현재 상태를 기반의 자동으로 스케일링하거나 클러스터를 조정
  - 모니터링 파이프라인 kubelet에서 메트릭을 가져옴
  - CNCF 프로젝트인 프로메테우스(phrometheus)가 대표적임
  - custom.metrics.k8s.io, external.metrics.k8s.io API를 사용

<img src="https://github.com/Virusuki/Kubernetes/blob/main/k8s-develop/Logging%20(container)/files/img/kubernetes_mornitoring_architecture.PNG" width="450px" height="300px" title="px(픽셀) 크기 설정" alt="kubernetes mornitoring architecture"></img><br/>




Reference:
- https://github.com/kubernetes/community/blob/master/contributors/design-proposals/instrumentation/monitoring_architecture.md
