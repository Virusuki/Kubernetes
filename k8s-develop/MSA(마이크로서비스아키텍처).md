# MSA (Micro service achitecture)

1. 애플리케이션 로직을 각자 책임이 명확한 작은 컴포넌트들로 분해하고, 이들을 조합해서 솔루션 제공
2. 각 컴포넌트는 작은 책임 영역을 담당 및 완전히 상호 독립적 배포
   - 여러 애플리케이션에서 재사용할 수 있어야 함 (모듈화가 잘 되어 있음)
3. 마이크로서비스는 기본 원칙에 기반이 됨
   - 소비자와 서비스제공자 간 데이터 교환을 위해 HTTP와 JSON 같은 경량 통신 프로토콜 사용
4. 애플리케이션은 항상 기술 중립적 프로토콜을 사용해 통신하므로 서비스 구현기술과는 무관 (다양한 플랫폼 가능)
   - 마이크로서비스 기반의 애플리케이션을 다양한 언어와 기술로 구축 가능
5. 작고 독립적이며, 분산된 마이크로서비스를 사용해 조직
   - 명확히 정의된 책임 영역을 담당하는 소규모 팀을 보유
   - 이 팀들은 애플리케이션 출시처럼 하나의 목표를 향해 일함 (자기 개발 서비스만 책임)
 
## MSA의 목적
- 마이크로서비스를 달성하기 위해서는 많은 노력과 비용이 수반
- 따라서, MSA를 적용하고자 할 경우 명확한 목적을 갖고 고려해야 함

- 1) 마이크로서비스 아키텍처를 통해 달성하고자 하는 목표는 무엇인가?
   - 명백한 목표 예를 들어) 기존 대비 1.5배 빠른 성능, 이벤트에도 중단되지 않는 가용성 높은 서비스 등
     결과를 기준으로 설명할 수 있어야 하며, 시스템의 end-user에게 이점을 제공하는 방식으로 설명될 수 있어야 함   

- 2) 마이크로서비스 사용에 대한 대안을 고려했습니까?
   - 마이크로서비스가 제공하는 것과 동일한 이점을 얻을 수 있는 다른 많은 방법이 있음. 때론, MSA를 고려하지
     않고도 적용 가능한 방법이 다양하게 존재하므로, 이에 대한 고려를 선행한 후 MSA를 선택하는 것이 좋음

### MSA의 장점
- (1) 작은 서비스들로 나누고, 각 서비스를 독립적으로 만듦 (loosely-coupled : 약결합)
- (2) 대용량 분산 환경에 적합
- (3) 복잡도 감소
- (4) 유연한 배포
- (5) 재사용성 -> 확장성
- (6) 서비스 별 HW/SW 플랫폼 기술의 도입 및 확장이 자유로움
- (7) 개발자가 이해하기 쉽고 개발/운영 매 단계의 생산성이 높음
- (8) 지속적인 개발과 deploy(CI/CD)가 가능하고 비즈니스 환경에서 소수 인원의 책임이 이루어짐 
- (9) Fault isolation(장애 허용 시스템) 특성이 좋음
   - 여러 애플리케이션들을 여러개 배포하므로, 그 중에 하나라도 fault가 나더라도 빠르게 복구가 가능

### MSA의 단점
- (1) 장애추적, 모니터링, 메시징 처리가 어렵다 (보완방법: sleuth 등 ELK, EFK, Splunk 등의 서비스 연동 고려)
- (2) 여러 서비스에 걸쳐져 있는 Feature의 경우, 트랙잭션 다루기 어려움 
    - (보완방법: 보상 트랜잭션 또는 부분적으로 composite 서비스로의 병합 고려)
- (3) 여러 서비스에 걸쳐져 있는 Feature의 경우, 테스팅이 복잡함 (보완방법: 테스팅 계획 및 방법에 노력 투자)
- (4) 서비스 간 dependency가 있는 경우 릴리즈가 까다로움 
    - (보완방법: 관련 조직간 roll-out 계획 및 dependency 관리체계 수립)
- (5) 서비스 개수가 많고 유동적이기 때문에 CI/CD 및 서비스 관리 상의 문제가 발생
    - (보완방법: 서비스 레지스트리, 모니터링, 개발/디플로이 자동화 기술 고려/PaaS 고려)
- (6) 모놀리스 시스템을 마이크로서비스 전환시, 큰 고통이 수반됨
    - (보완방법: B2C 웹 또는 SaaS 애플리케이션은 처음부터 마이크로서비스 및 서비스 별 조직을 고려하여 구성)













